
    <!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BountyAcademy - Labs Cybersec</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        /* --- VARIABLES CSS --- */
        :root {
            --primary-dark: #0f172a;
            --secondary-dark: #1e293b;
            --border-dark: #334155;
            --text-primary: #e2e8f0;
            --text-secondary: #94a3b8;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --info: #3b82f6;
            --transition: all 0.3s ease;
        }
        /* --- RESET & BASE STYLES --- */
        * { 
            margin: 0; 
                <script>
        // --- APPLICATION STATE ---
        const appState = {
            xp: 0,
            level: 1,
            completedModules: [],
            currentView: 'dashboard',
            raceStock: 5,
            raceUserMoney: 1000,
            raceInventory: 0,
            userProfile: {
                id: 1337,
                name: "Hacker Apprenti",
                email: "apprenti@bountyacademy.com",
                role: "Étudiant"
            }
        };

        // --- MODULES DATA ---
        const modulesData = [
            { 
                id: 'xss', 
                title: 'Lab 1: XSS Reflected', 
                icon: 'code', 
                color: '#10b981', 
                xp: 200, 
                level: 'Facile',
                description: 'Injectez du JavaScript via un champ de recherche',
                hint: 'Essayez: <code>&lt;script&gt;alert(1)&lt;/script&gt;</code>'
            },
            { 
                id: 'idor', 
                title: 'Lab 2: IDOR', 
                icon: 'id-card', 
                color: '#f59e0b', 
                xp: 300, 
                level: 'Moyen',
                description: 'Accédez à des ressources sans autorisation',
                hint: 'Changez l\'ID dans l\'URL pour accéder à d\'autres profils'
            },
            { 
                id: 'sqli', 
                title: 'Lab 3: SQL Injection', 
                icon: 'database', 
                color: '#ef4444', 
                xp: 400, 
                level: 'Intermédiaire',
                description: 'Injectez des commandes SQL via un formulaire de login',
                hint: 'Utilisez: <code>\' OR \'1\'=\'1</code> dans le mot de passe'
            },
            { 
                id: 'csrf', 
                title: 'Lab 4: CSRF', 
                icon: 'hand-pointer', 
                color: '#3b82f6', 
                xp: 400, 
                level: 'Avancé',
                description: 'Forgez une requête pour modifier des données',
                hint: 'Créez un formulaire HTML qui s\'envoie automatiquement'
            },
            { 
                id: 'xxe', 
                title: 'Lab 5: XXE', 
                icon: 'file-code', 
                color: '#fbbf24', 
                xp: 500, 
                level: 'Expert',
                description: 'Exploitez le traitement XML pour lire des fichiers système',
                hint: 'Utilisez une entité externe: <code>&lt;!ENTITY xxe SYSTEM "file:///etc/passwd"&gt;</code>'
            },
            { 
                id: 'rc', 
                title: 'Lab 6: Race Condition', 
                icon: 'gauge-high', 
                color: '#ef4444', 
                xp: 600, 
                level: 'Expert+',
                description: 'Exploitez des conditions de course pour acheter plus que le stock',
                hint: 'Envoyez plusieurs requêtes simultanées avant la mise à jour du stock'
            },
            { 
                id: 'lfi', 
                title: 'Lab 7: LFI', 
                icon: 'folder-open', 
                color: '#34d399', 
                xp: 600, 
                level: 'Intermédiaire',
                description: 'Lisez des fichiers locaux via des inclusions de fichiers',
                hint: 'Utilisez: <code>../../../etc/passwd</code>'
            }
        ];

        // --- UTILITY FUNCTIONS ---
        function escapeHtml(text) {
            if (!text) return '';
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        function getBackButton() {
            return `
                <button onclick="navigateTo('dashboard')" class="vulnerable-btn" style="margin-bottom:1.5rem;">
                    <i class="fa-solid fa-arrow-left"></i> Retour au tableau de bord
                </button>
            `;
        }

        function getValidateButton(moduleId) {
            const completed = appState.completedModules.includes(moduleId);
            const module = modulesData.find(m => m.id === moduleId);
            const buttonText = completed ? 
                '<i class="fa-solid fa-check-circle"></i> Déjà validé' : 
                '<i class="fa-solid fa-trophy"></i> Valider le lab';
            return `
                <div style="margin-top: 2rem;">
                    <button class="action-btn" onclick="validateModule('${moduleId}')" ${completed ? 'disabled' : ''}>
                        ${buttonText}
                    </button>
                    ${completed ? `
                        <div style="text-align: center; margin-top: 0.5rem; color: var(--success);">
                            <i class="fa-solid fa-check"></i> ${module.xp} XP obtenus
                        </div>
                    ` : ''}
                </div>
            `;
        }


        // --- VIEW RENDERING ---
        const views = {
            dashboard: () => {
                const progress = Math.round((appState.completedModules.length / modulesData.length) * 100);
                return `
                    <h2 class="dashboard-title">Tableau de bord</h2>
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div style="color:var(--text-secondary); margin-bottom:0.5rem;">
                                <i class="fa-solid fa-medal"></i> XP Total
                            </div>
                            <div style="font-size:1.8rem; font-weight:bold; color:white;">${appState.xp}</div>
                            <div style="font-size:0.8rem; color:var(--text-secondary); margin-top:0.5rem;">
                                Prochain niveau: ${3000 - appState.xp} XP
                            </div>
                        </div>
                        <div class="stat-card">
                            <div style="color:var(--text-secondary); margin-bottom:0.5rem;">
                                <i class="fa-solid fa-flag-checkered"></i> Labs Terminés
                            </div>
                            <div style="font-size:1.8rem; font-weight:bold; color:white;">${appState.completedModules.length}/7</div>
                            <div style="margin-top:0.5rem;">
                                <div style="background:#334155; height:4px; border-radius:2px; overflow:hidden;">
                                    <div style="background:var(--success); height:100%; width:${progress}%; transition:width 0.5s;"></div>
                                </div>
                                <div style="font-size:0.8rem; color:var(--text-secondary); text-align:right; margin-top:0.25rem;">
                                    ${progress}%
                                </div>
                            </div>
                        </div>
                    </div>
                    <h3 style="color:white; margin-bottom:1.5rem; display:flex; align-items:center; gap:0.5rem;">
                        <i class="fa-solid fa-list-check"></i> Modules disponibles
                    </h3>
                    <div style="margin-bottom:1rem; color:var(--text-secondary);">
                        Cliquez sur un module pour commencer le lab
                    </div>
                    ${modulesData.map(module => {
                        const isCompleted = appState.completedModules.includes(module.id);
                        const borderColor = isCompleted ? '#10b981' : '#475569';
                        return `
                            <div class="module-card" onclick="navigateTo('module-${module.id}')" style="border-color:${borderColor}">
                                <div style="display:flex; align-items:center; gap:1rem;">
                                    <div class="module-icon" style="color:${module.color}">
                                        <i class="fa-solid fa-${module.icon}"></i>
                                    </div>
                                    <div>
                                        <h4 style="color:white; margin:0;">${module.title}</h4>
                                        <div style="display:flex; align-items:center; gap:0.5rem; margin-top:0.25rem;">
                                            <span style="font-size:0.8rem; color:#94a3b8;">${module.level}</span>
                                            <span style="font-size:0.8rem; color:${module.color}">• ${module.xp} XP</span>
                                            ${isCompleted ? 
                                                '<span style="font-size:0.7rem; color:var(--success);"><i class="fa-solid fa-check"></i> Complété</span>' : 
                                                ''
                                            }
                                        </div>
                                    </div>
                                </div>
                                <i class="fa-solid fa-chevron-right" style="color:#475569"></i>
                            </div>
                        `;
                    }).join('')}
                `;
            },
            // XSS Lab
            'module-xss': () => {
                const module = modulesData.find(m => m.id === 'xss');
                return `
                    ${getBackButton()}
                    <div class="lab-header">
                        <div>
                            <h2 style="color:white; margin-bottom:0.25rem;">${module.title}</h2>
                            <div style="color:var(--text-secondary);">${module.description}</div>
                        </div>
                        <span class="lab-difficulty">${module.level}</span>
                    </div>
                    <div class="lab-container">
                        <div style="margin-bottom:1.5rem; padding:1rem; background:rgba(59, 130, 246, 0.1); border-radius:0.5rem; border:1px solid rgba(59, 130, 246, 0.3);">
                            <div style="display:flex; align-items:center; gap:0.5rem; color:var(--info); margin-bottom:0.5rem;">
                                <i class="fa-solid fa-bullseye"></i>
                                <strong>Mission</strong>
                            </div>
                            <div style="color:var(--text-primary);">
                                Faire apparaître une <code>alert(1)</code> via le champ de recherche.
                            </div>
                        </div>
                        <div class="lab-browser">
                            <div class="browser-bar">
                                <div style="width:12px; height:12px; border-radius:50%; background:#ef4444;"></div>
                                <div style="width:12px; height:12px; border-radius:50%; background:#f59e0b;"></div>
                                <div style="width:12px; height:12px; border-radius:50%; background:#10b981;"></div>
                                <div class="url-bar">https://vulnerable-site.com/search</div>
                            </div>
                            <div class="browser-content">
                                <h3 style="color:#334155; margin-bottom:1rem;">Recherche sur le site</h3>
                                <div class="input-group">
                                    <input type="text" id="xss-input" class="vulnerable-input" placeholder="Entrez votre recherche..." value="">
                                    <button onclick="runXSS()" class="vulnerable-btn">Rechercher</button>
                                </div>
                                <div id="xss-result" style="margin-top:1.5rem; padding:1rem; border:1px solid #e2e8f0; border-radius:4px; min-height:80px;">
                                    <div style="color:#64748b; text-align:center; padding:1rem;">
                                        Résultats de recherche apparaîtront ici
                                    </div>
                                </div>
                                <div style="margin-top:1.5rem; padding:1rem; background:#f1f5f9; border-radius:4px; border:1px dashed #cbd5e1;">
                                    <div style="display:flex; align-items:center; gap:0.5rem; color:#64748b; margin-bottom:0.5rem;">
                                        <i class="fa-solid fa-lightbulb"></i>
                                        <strong>Indice</strong>
                                    </div>
                                    <div style="color:#334155; font-size:0.9rem;">
                                        ${module.hint}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    ${getValidateButton('xss')}
                `;
            },
            // IDOR Lab
            'module-idor': () => {
                const module = modulesData.find(m => m.id === 'idor');
                return `
                    ${getBackButton()}
                    <div class="lab-header">
                        <div>
                            <h2 style="color:white; margin-bottom:0.25rem;">${module.title}</h2>
                            <div style="color:var(--text-secondary);">${module.description}</div>
                        </div>
                        <span class="lab-difficulty">${module.level}</span>
                    </div>
                    <div class="lab-container">
                        <div style="margin-bottom:1.5rem; padding:1rem; background:rgba(245, 158, 11, 0.1); border-radius:0.5rem; border:1px solid rgba(245, 158, 11, 0.3);">
                            <div style="display:flex; align-items:center; gap:0.5rem; color:var(--warning); margin-bottom:0.5rem;">
                                <i class="fa-solid fa-bullseye"></i>
                                <strong>Mission</strong>
                            </div>
                            <div style="color:var(--text-primary);">
                                Accédez au profil administrateur (ID 1234). Votre ID est ${appState.userProfile.id}.
                            </div>
                        </div>
                        <div class="lab-browser">
                            <div class="browser-bar">
                                <div style="width:12px; height:12px; border-radius:50%; background:#ef4444;"></div>
                                <div style="width:12px; height:12px; border-radius:50%; background:#f59e0b;"></div>
                                <div style="width:12px; height:12px; border-radius:50%; background:#10b981;"></div>
                                <div class="url-bar" id="idor-url">https://vulnerable-site.com/profile?id=${appState.userProfile.id}</div>
                            </div>
                            <div class="browser-content">
                                <h3 style="color:#334155; margin-bottom:1rem;">Gestion des profils</h3>
                                <div style="margin:1rem 0;">
                                    <label style="display:block; color:#334155; margin-bottom:0.5rem; font-weight:600;">
                                        ID du profil à afficher:
                                    </label>
                                    <div class="input-group">
                                        <input type="number" id="idor-input" class="vulnerable-input" value="${appState.userProfile.id}" min="1" max="9999">
                                        <button onclick="loadIDORProfile()" class="vulnerable-btn">
                                            <i class="fa-solid fa-user"></i> Charger
                                        </button>
                                    </div>
                                </div>
                                <div id="idor-profile" class="profile-card">
                                    <!-- Profile will be loaded here -->
                                </div>
                                <div style="margin-top:1.5rem; padding:1rem; background:#f1f5f9; border-radius:4px; border:1px dashed #cbd5e1;">
                                    <div style="display:flex; align-items:center; gap:0.5rem; color:#64748b; margin-bottom:0.5rem;">
                                        <i class="fa-solid fa-lightbulb"></i>
                                        <strong>Indice</strong>
                                    </div>
                                    <div style="color:#334155; font-size:0.9rem;">
                                        ${module.hint}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    ${getValidateButton('idor')}
                `;
            },
            // SQL Injection Lab
            'module-sqli': () => {
                const module = modulesData.find(m => m.id === 'sqli');
                return `
                    ${getBackButton()}
                    <div class="lab-header">
                        <div>
                            <h2 style="color:white; margin-bottom:0.25rem;">${module.title}</h2>
                            <div style="color:var(--text-secondary);">${module.description}</div>
                        </div>
                        <span class="lab-difficulty">${module.level}</span>
                    </div>
                    <div class="lab-container">
                        <div style="margin-bottom:1.5rem; padding:1rem; background:rgba(239, 68, 68, 0.1); border-radius:0.5rem; border:1px solid rgba(239, 68, 68, 0.3);">
                            <div style="display:flex; align-items:center; gap:0.5rem; color:var(--danger); margin-bottom:0.5rem;">
                                <i class="fa-solid fa-bullseye"></i>
                                <strong>Mission</strong>
                            </div>
                            <div style="color:var(--text-primary);">
                                Connectez-vous en tant qu'administrateur sans connaître le mot de passe.
                            </div>
                        </div>
                        <div class="lab-browser">
                            <div class="browser-bar">
                                <div style="width:12px; height:12px; border-radius:50%; background:#ef4444;"></div>
                                <div style="width:12px; height:12px; border-radius:50%; background:#f59e0b;"></div>
                                <div style="width:12px; height:12px; border-radius:50%; background:#10b981;"></div>
                                <div class="url-bar">https://vulnerable-site.com/login</div>
                            </div>
                            <div class="browser-content">
                                <h3 style="color:#334155; margin-bottom:1rem;">Connexion administrateur</h3>
                                <div style="margin:1rem 0;">
                                    <div style="margin-bottom:1rem;">
                                        <label style="display:block; color:#334155; margin-bottom:0.25rem;">Nom d'utilisateur:</label>
                                        <input type="text" id="sqli-user" class="vulnerable-input" placeholder="admin" value="admin">
                                    </div>
                                    <div style="margin-bottom:1rem;">
                                        <label style="display:block; color:#334155; margin-bottom:0.25rem;">Mot de passe:</label>
                                        <input type="password" id="sqli-pass" class="vulnerable-input" placeholder="Entrez le mot de passe" value="">
                                    </div>
                                    <button onclick="runSQLI()" class="vulnerable-btn" style="width:100%;">
                                        <i class="fa-solid fa-sign-in-alt"></i> Se connecter
                                    </button>
                                </div>
                                <div id="sqli-result" class="result-container">
                                    <div style="color:#64748b; text-align:center; padding:1rem;">
                                        Résultat de la connexion apparaîtra ici
                                    </div>
                                </div>
                                <div style="margin-top:1.5rem; padding:1rem; background:#f1f5f9; border-radius:4px; border:1px dashed #cbd5e1;">
                                    <div style="display:flex; align-items:center; gap:0.5rem; color:#64748b; margin-bottom:0.5rem;">
                                        <i class="fa-solid fa-lightbulb"></i>
                                        <strong>Indice</strong>
                                    </div>
                                    <div style="color:#334155; font-size:0.9rem;">
                                        ${module.hint}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    ${getValidateButton('sqli')}
                `;
            },





























                      *
           
